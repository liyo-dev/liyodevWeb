<section class="portfolio-section">
  <div class="section-title">
    <h2>Portfolio</h2>
  </div>

  <!-- Floating Tab Navigation -->
  <div class="floating-tabs-container" #tabsContainer>
    <div class="tab-indicator" #tabIndicator></div>
    <button 
      class="floating-tab" 
      [class.active]="activeCategory === 'steam'"
      (click)="switchCategory('steam')"
      #steamTab>
      <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658a3.4 3.4 0 0 1 2.147-.781c.148 0 .292.009.436.022l2.863-4.144V8.78a4.508 4.508 0 0 1 4.506-4.506 4.51 4.51 0 0 1 4.506 4.506 4.51 4.51 0 0 1-4.506 4.506h-.105l-4.037 2.888c0 .075.003.149.003.224a3.404 3.404 0 0 1-3.402 3.402 3.404 3.404 0 0 1-3.401-3.402c0-.061.003-.122.007-.182L1.533 12.9C2.767 18.135 7.581 22 11.979 22c6.624 0 12.021-5.376 12.021-12S18.603 0 11.979 0zm-6.466 16.172l-1.449-.6a2.539 2.539 0 0 0 2.548 1.635 2.54 2.54 0 0 0 2.541-2.541c0-.896-.463-1.688-1.162-2.139l-1.501-.621a2.54 2.54 0 1 0-1.477 4.266zm8.944-6.67a3.003 3.003 0 0 0 3.003-3.003 3.003 3.003 0 0 0-3.003-3.003 3.003 3.003 0 0 0-3.003 3.003 3.003 3.003 0 0 0 3.003 3.003z"/>
      </svg>
      <span class="tab-label">Steam</span>
    </button>
    <button 
      class="floating-tab" 
      [class.active]="activeCategory === 'playStore'"
      (click)="switchCategory('playStore')"
      #mobileTab>
      <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4483.9993.9993s-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4483.9993.9993s-.4482.9997-.9993.9997m11.046-6.02c1.9979 0 3.6190 1.6211 3.6190 3.6190s-1.6211 3.6190-3.6190 3.6190S13.904 14.9383 13.904 12.9404s1.6211-3.6190 3.6190-3.6190M6.477 9.3214c1.9979 0 3.6190 1.6211 3.6190 3.6190s-1.6211 3.6190-3.6190 3.6190S2.858 14.9383 2.858 12.9404s1.6211-3.6190 3.6190-3.6190"/>
      </svg>
      <span class="tab-label">Google Play Store</span>
    </button>
    <button 
      class="floating-tab" 
      [class.active]="activeCategory === 'apps'"
      (click)="switchCategory('apps')"
      #appsTab>
      <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z"/>
      </svg>
      <span class="tab-label">Apps</span>
    </button>
    <button 
      class="floating-tab" 
      [class.active]="activeCategory === 'games'"
      (click)="switchCategory('games')"
      #gamesTab>
      <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.91 13.34l2.636-4.026-.454-.406-3.673 3.099c-.675-.138-1.402.068-1.894.618-.736.823-.665 2.088.159 2.824.824.736 2.088.665 2.824-.159.492-.55.615-1.295.402-1.95zm-3.91-10.646v-2.694h4v2.694c-1.439-.243-2.592-.238-4 0zm8.851 2.064l1.407-1.407 1.414 1.414-1.321 1.321c-.462-.484-.964-.927-1.5-1.328zm-18.851 4.242h8v2h-8v-2zm-2 4h8v2h-8v-2zm3 4h5v2h-5v-2zm12.639-.471c-.675.675-.675 1.769 0 2.444s1.769.675 2.444 0 .675-1.769 0-2.444-1.769-.675-2.444 0zm-2.639-1.529h8v2h-8v-2z"/>
      </svg>
      <span class="tab-label">Games</span>
    </button>
  </div>

  <!-- Dynamic Content Container -->
  <div class="portfolio-container" #contentContainer>
    
    <!-- Steam Projects -->
    <div class="content-panel steam-panel" [class.active]="activeCategory === 'steam'" #steamPanel>
      <div class="panel-header">
        <h3>PrÃ³ximamente en Steam</h3>
        <p>Mis prÃ³ximos lanzamientos en la plataforma lÃ­der de gaming</p>
      </div>
      <div class="content-grid">
        @for (game of steamGames; track game.title) {
          <div class="content-card steam-card" (click)="navigateToGame(game.link)">
            <div class="card-status">{{ game.status }}</div>
            <div class="card-body">
              <h4>{{ game.title }}</h4>
              <p>{{ game.description }}</p>
              <div class="card-footer">
                <span class="platform-tag steam">Steam</span>
                <span class="action-text">Conocer mÃ¡s â†’</span>
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Mobile Games -->
    <div class="content-panel mobile-panel" [class.active]="activeCategory === 'playStore'" #mobilePanel>
      <div class="panel-header">
        <h3>Juegos MÃ³viles</h3>
        <p>Experiencias optimizadas para dispositivos mÃ³viles</p>
      </div>
      <div class="content-grid">
        @for (game of googlePlayGames; track game.title) {
          <div class="content-card mobile-card" (click)="navigateToGame(game.link)">
            <div class="card-image">
              <img [src]="game.image" [alt]="game.title" loading="lazy">
              <div class="card-overlay">
                <span class="play-btn">ðŸ“± Descargar</span>
              </div>
            </div>
            <div class="card-status">{{ game.status }}</div>
            <div class="card-body">
              <h4>{{ game.title }}</h4>
              <p>{{ game.description }}</p>
              <div class="card-footer">
                <span class="platform-tag mobile">{{ game.type }}</span>
                <a [href]="game.itchLink" target="_blank" class="action-link" (click)="$event.stopPropagation()">
                  Google Play â†’
                </a>
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Applications -->
    <div class="content-panel apps-panel" [class.active]="activeCategory === 'apps'" #appsPanel>
      <div class="panel-header">
        <h3>Aplicaciones & Herramientas</h3>
        <p>Proyectos de desarrollo y utilidades</p>
      </div>
      @if (applications.length > 0) {
        <div class="apps-showcase">
          <div class="showcase-controls">
            <button class="showcase-btn" (click)="navigateAppsShowcase(-1)" [disabled]="currentAppIndex === 0">â€¹</button>
            <div class="showcase-counter">{{ currentAppIndex + 1 }} / {{ applications.length }}</div>
            <button class="showcase-btn" (click)="navigateAppsShowcase(1)" [disabled]="currentAppIndex >= applications.length - 1">â€º</button>
          </div>
          
          <div class="showcase-content">
            @for (app of applications; track app.title; let i = $index) {
              <div class="showcase-card app-showcase-card" [class.active]="i === currentAppIndex" (click)="navigateToApp(app.link)">
                <div class="showcase-image">
                  <div class="image-placeholder">ðŸ’»</div>
                  <div class="app-overlay">
                    <div class="view-btn">
                      <span>Ver en GitHub</span>
                      <span>â†’</span>
                    </div>
                  </div>
                </div>
                <div class="showcase-info">
                  <div class="app-meta">
                    <span class="app-type-tag">{{ app.type }}</span>
                  </div>
                  <h4>{{ app.title }}</h4>
                  <p>{{ app.description }}</p>
                  <div class="tech-stack">
                    @for (tech of app.tech; track tech) {
                      <span class="tech-badge">{{ tech }}</span>
                    }
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">ðŸ’»</div>
          <p>PrÃ³ximamente nuevas aplicaciones...</p>
        </div>
      }
    </div>

    <!-- Published Games -->
    <div class="content-panel games-panel" [class.active]="activeCategory === 'games'" #gamesPanel>
      <div class="panel-header">
        <h3>Juegos Publicados</h3>
        <p>Proyectos completados y disponibles para jugar</p>
      </div>
      @if (publishedGames.length > 0) {
        <div class="games-showcase">
          <div class="showcase-controls">
            <button class="showcase-btn" (click)="navigateShowcase(-1)" [disabled]="currentGameIndex === 0">â€¹</button>
            <div class="showcase-counter">{{ currentGameIndex + 1 }} / {{ publishedGames.length }}</div>
            <button class="showcase-btn" (click)="navigateShowcase(1)" [disabled]="currentGameIndex >= publishedGames.length - 1">â€º</button>
          </div>
          
          <div class="showcase-content">
            @for (game of publishedGames; track game.title; let i = $index) {
              <div class="showcase-card" [class.active]="i === currentGameIndex" (click)="navigateToGame(game.link)">
                <div class="showcase-image">
                  <div class="image-placeholder">ðŸŽ®</div>
                  <div class="game-overlay">
                    <span class="play-btn">â–¶ Jugar</span>
                  </div>
                </div>
                <div class="showcase-info">
                  <div class="game-meta">
                    <span class="game-type">{{ game.type }}</span>
                    <span class="game-year">{{ game.year }}</span>
                  </div>
                  <h4>{{ game.title }}</h4>
                  <p>{{ game.description }}</p>
                </div>
              </div>
            }
          </div>
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">ðŸŽ®</div>
          <p>No hay juegos disponibles en este momento</p>
        </div>
      }
    </div>

  </div>
</section>
